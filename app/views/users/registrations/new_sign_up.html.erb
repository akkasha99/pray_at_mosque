<div class="logo">
  <a href="">
    <img src="/assets/logo.png" alt="Pray at Mosque"/>
  </a>
</div>
<div class="menu-toggler sidebar-toggler">
</div>
<div class="content">
  <h3 class="font-green">Sign Up as a "Mosque"</h3>

  <p class="hint"> Enter your personal details below: </p>
  <% resource_name = :user %>
  <%= form_for(User.new, as: resource_name, url: registration_path(resource_name), :class => "register-form", :html => {:id => "mosque_registration"}) do |f| %>
      <%= devise_error_messages! %>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">First Name</label>
        <%= f.text_field :first_name, autofocus: true, :class => "form-control placeholder-no-fix", :placeholder => "First Name" %>
      </div>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">Last Name</label>
        <%= f.text_field :last_name, autofocus: false, :class => "form-control placeholder-no-fix", :placeholder => "Last Name" %>
      </div>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">Phone Number</label>
        <%= f.text_field :phone, autofocus: false, :class => "form-control placeholder-no-fix", :placeholder => "Phone Number" %>
      </div>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">About Me</label>
        <%= f.text_area :about_me, autofocus: false, :class => "form-control placeholder-no-fix", :placeholder => "About Me" %>
      </div>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">Email</label>
        <%= f.email_field :email, autofocus: false, :class => "form-control placeholder-no-fix", :placeholder => "Email" %>
      </div>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">Password</label>
        <% if @minimum_password_length %>
            <em>(<%= @minimum_password_length %> characters minimum)</em>
        <% end %><br/>
        <%= f.password_field :password, autocomplete: "off", :class => "form-control placeholder-no-fix", :placeholder => "Password", :id => "mosque_password" %>
      </div>

      <div class="form-group">
        <label class="control-label visible-ie8 visible-ie9">Password Confirmation</label>
        <%= f.password_field :password_confirmation, autocomplete: "off", :class => "form-control placeholder-no-fix", :placeholder => "Confirm Password" %>
      </div>

      <%= hidden_field_tag "role", "mosque" %>
      <!--<div class="form-group">-->
      <!--<label class="control-label visible-ie8 visible-ie9">User Type</label>-->
      <!--<%#= select_tag "role", options_for_select(["parent", "mosque"], "parent"), :class => "form-control" %>-->
      <!--</div>-->


      <div class="form-action">
        <%#= f.submit "Sign up", :class => "btn btn-success uppercase pull-right" %>
        <%= button_tag "Sign up", :type => "button", :class => "btn btn-success uppercase pull-right", :onclick => 'submit_sign_up()' %>
      </div>
  <% end %>

  <%= render "users/shared/links" %>
</div>

<script>

    function submit_sign_up() {
        if ($("#mosque_registration").valid() == true) {
            $("#mosque_registration").submit();
        }
    }

    $("#mosque_registration").validate({
        rules: {
            "user[first_name]": {
                required: true,
                maxlength: 255
            },
            "user[last_name]": {
                required: true,
                maxlength: 255
            },
            "user[email]": {
                required: true,
                email: true,
                maxlength: 255
            },
            "user[phone]": {
                required: true,
                maxlength: 255
            },
            "user[about_me]": {
//                required: true,
                maxlength: 255
            },
            "user[password]": {
                required: true,
                maxlength: 255,
                minlength: 8
            },
            "user[password_confirmation]": {
                required: true,
                maxlength: 255,
                minlength: 8,
                equalTo: "#mosque_password"
            }
        }
    });
</script>
